<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charolas - P&C Candys</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
            color: #333;
        }
        header {
            background-color: #f44336;
            padding: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #d32f2f;
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: white;
            margin-left: 10px;
        }
        .nav-menu {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            align-items: center;
        }
        .nav-menu li {
            margin-left: 20px;
        }
        .nav-menu a {
            color: white;
            text-decoration: none;
            font-size: 16px;
        }
        .menu-section {
            padding: 20px;
            text-align: center;
        }
        .menu-section h1 {
            color: #1e88e5;
            font-size: 32px;
            margin-bottom: 20px;
        }
        .menu-item {
            background-color: white;
            padding: 20px;
            margin: 20px auto;
            max-width: 600px;
            border-radius: 5px;
            border: 1px solid #ddd;
            text-align: left;
        }
        .menu-item h3 {
            font-size: 18px;
            color: #1e88e5;
            margin-bottom: 10px;
        }
        .menu-item select {
            width: 90%;
            padding: 8px;
            margin: 10px 0;
            font-size: 14px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .menu-item select:disabled {
            background-color: #f0f0f0;
            cursor: not-allowed;
        }
        .menu-item .selected-gummies p {
            font-size: 12px;
            margin: 5px 0;
        }
        .menu-item button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            margin: 8px;
        }
        .menu-item button:hover {
            background-color: #45a049;
        }
        footer {
            background-color: #1976d2;
            color: white;
            padding: 20px;
            text-align: center;
            margin-top: 50px;
        }
        .social-icons a {
            color: white;
            margin: 0 20px;
            text-decoration: none;
            font-size: 24px;
        }
        @media (max-width: 767px) {
            .logo { font-size: 4vw; }
            .nav-menu { display: none; }
            .menu-section h1 { font-size: 5vw; }
            .menu-item h3 { font-size: 3vw; }
            .menu-item select { font-size: 2.5vw; padding: 1.5vw; }
            .menu-item .selected-gummies p { font-size: 2vw; }
            .menu-item button { font-size: 2vw; padding: 1.5vw 3vw; margin: 1vw; }
            .social-icons a { font-size: 4vw; }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">🍭 P&C Candys</div>
        <ul class="nav-menu">
            <li><a href="index.html">Inicio</a></li>
            <li><a href="bolsa_de_gomitas.html">Bolsa de Gomitas</a></li>
            <li><a href="charolas.html">Charolas</a></li>
            <li><a href="mini_hot_cakes.html">Mini Hot Cakes</a></li>
            <li><a href="fresas_con_crema.html">Fresas con Crema</a></li>
            <li><a href="extras.html">Extras</a></li>
            <li><a href="pedidos.html">Pedidos</a></li>
        </ul>
    </header>

    <section class="menu-section">
        <h1>🍭 MENÚ 2: CHAROLAS</h1>
        <div class="menu-item">
            <h3>Mini Mix</h3>
            <p>Máximo 4 tipos de gomitas</p>
            <select id="miniGummies" onchange="updateSelection('mini')">
                <option value="">Selecciona un tipo de gomita</option>
                <option value="Corazones">❤️ Corazones</option>
                <option value="Xtreme">🔥 Xtreme</option>
                <option value="Aros de Durazno">🍑 Aros de Durazno</option>
                <option value="Aros de Manzana">🍏 Aros de Manzana</option>
                <option value="Frutas Enchiladas">🍓 Frutas Enchiladas</option>
                <option value="Orugas y Panditas">🐛 Orugas y Panditas</option>
                <option value="Manguitos">🥭 Manguitos</option>
                <option value="Gajos de Naranja">🍊 Gajos de Naranja</option>
                <option value="Delfines">🐬 Delfines</option>
                <option value="Pingüinos">🐧 Pingüinos</option>
            </select>
            <div id="miniSelected" class="selected-gummies"></div>
            <select id="miniApple" onchange="updateAppleExtra('mini')">
                <option value="No">Manzana con chamoy: No</option>
                <option value="Sí">Manzana con chamoy: Sí (+$15)</option>
            </select>
            <button onclick="addToOrder('Mini Mix', 40, 'Naturales')">Naturales - $40</button>
            <button onclick="addToOrder('Mini Mix', 50, 'Ahogadas')">Ahogadas - $50</button>
            <button onclick="addToOrder('Mini Mix', 60, 'Empanizadas')">Empanizadas - $60</button>

            <h3>Charola Deluxe</h3>
            <p>5 tipos + 1 Manzana con chamoy (incluida)</p>
            <select id="deluxeGummies" onchange="updateSelection('deluxe')">
                <option value="">Selecciona un tipo de gomita</option>
                <option value="Corazones">❤️ Corazones</option>
                <option value="Xtreme">🔥 Xtreme</option>
                <option value="Aros de Durazno">🍑 Aros de Durazno</option>
                <option value="Aros de Manzana">🍏 Aros de Manzana</option>
                <option value="Frutas Enchiladas">🍓 Frutas Enchiladas</option>
                <option value="Orugas y Panditas">🐛 Orugas y Panditas</option>
                <option value="Manguitos">🥭 Manguitos</option>
                <option value="Gajos de Naranja">🍊 Gajos de Naranja</option>
                <option value="Delfines">🐬 Delfines</option>
                <option value="Pingüinos">🐧 Pingüinos</option>
            </select>
            <div id="deluxeSelected" class="selected-gummies"></div>
            <button onclick="addToOrder('Charola Deluxe', 90, 'Naturales')">Naturales - $90</button>
            <button onclick="addToOrder('Charola Deluxe', 100, 'Ahogadas')">Ahogadas - $100</button>
            <button onclick="addToOrder('Charola Deluxe', 110, 'Empanizadas')">Empanizadas - $110</button>

            <h3>Maxi Mix</h3>
            <p>Máximo 6 tipos de gomitas</p>
            <select id="maxiGummies" onchange="updateSelection('maxi')">
                <option value="">Selecciona un tipo de gomita</option>
                <option value="Corazones">❤️ Corazones</option>
                <option value="Xtreme">🔥 Xtreme</option>
                <option value="Aros de Durazno">🍑 Aros de Durazno</option>
                <option value="Aros de Manzana">🍏 Aros de Manzana</option>
                <option value="Frutas Enchiladas">🍓 Frutas Enchiladas</option>
                <option value="Orugas y Panditas">🐛 Orugas y Panditas</option>
                <option value="Manguitos">🥭 Manguitos</option>
                <option value="Gajos de Naranja">🍊 Gajos de Naranja</option>
                <option value="Delfines">🐬 Delfines</option>
                <option value="Pingüinos">🐧 Pingüinos</option>
            </select>
            <div id="maxiSelected" class="selected-gummies"></div>
            <select id="maxiApple" onchange="updateAppleExtra('maxi')">
                <option value="No">Manzana con chamoy: No</option>
                <option value="Sí">Manzana con chamoy: Sí (+$15)</option>
            </select>
            <button onclick="addToOrder('Maxi Mix', 60, 'Naturales')">Naturales - $60</button>
            <button onclick="addToOrder('Maxi Mix', 70, 'Ahogadas')">Ahogadas - $70</button>
            <button onclick="addToOrder('Maxi Mix', 80, 'Empanizadas')">Empanizadas - $80</button>

            <h3>Mega Deluxe</h3>
            <p>Máximo 10 tipos de gomitas</p>
            <select id="megaGummies" onchange="updateSelection('mega')">
                <option value="">Selecciona un tipo de gomita</option>
                <option value="Corazones">❤️ Corazones</option>
                <option value="Xtreme">🔥 Xtreme</option>
                <option value="Aros de Durazno">🍑 Aros de Durazno</option>
                <option value="Aros de Manzana">🍏 Aros de Manzana</option>
                <option value="Frutas Enchiladas">🍓 Frutas Enchiladas</option>
                <option value="Orugas y Panditas">🐛 Orugas y Panditas</option>
                <option value="Manguitos">🥭 Manguitos</option>
                <option value="Gajos de Naranja">🍊 Gajos de Naranja</option>
                <option value="Delfines">🐬 Delfines</option>
                <option value="Pingüinos">🐧 Pingüinos</option>
            </select>
            <div id="megaSelected" class="selected-gummies"></div>
            <select id="megaApple" onchange="updateAppleExtra('mega')">
                <option value="No">Manzana con chamoy: No</option>
                <option value="Sí">Manzana con chamoy: Sí (+$15)</option>
            </select>
            <button onclick="addToOrder('Mega Deluxe', 160, 'Naturales')">Naturales - $160</button>
            <button onclick="addToOrder('Mega Deluxe', 170, 'Ahogadas')">Ahogadas - $170</button>
            <button onclick="addToOrder('Mega Deluxe', 180, 'Empanizadas')">Empanizadas - $180</button>
        </div>
    </section>

    <footer>
        <h3>Redes Sociales</h3>
        <div class="social-icons">
            <a href="https://facebook.com/PyCCandys">Facebook</a>
            <a href="https://instagram.com/PyCCandys">Instagram</a>
            <a href="https://wa.me/524481012425">WhatsApp</a>
            <a href="https://tiktok.com/@PyCCandys">TikTok</a>
        </div>
    </footer>

    <script>
        let orders = JSON.parse(localStorage.getItem('orders')) || [];
        let selectedGummies = { mini: [], deluxe: [], maxi: [], mega: [] };
        let appleExtras = { mini: 'No', deluxe: 'Sí', maxi: 'No', mega: 'No' }; // Charola Deluxe incluye manzana por defecto

        function updateSelection(tray) {
            const select = document.getElementById(`${tray}Gummies`);
            const selectedDiv = document.getElementById(`${tray}Selected`);
            const limits = { mini: 4, deluxe: 5, maxi: 6, mega: 10 };
            const limit = limits[tray];

            if (select.value && !selectedGummies[tray].includes(select.value)) {
                if (selectedGummies[tray].length < limit) {
                    selectedGummies[tray].push(select.value);
                    selectedDiv.innerHTML += `<p>${select.value} <button onclick="removeGummy('${tray}', '${select.value}')">Eliminar</button></p>`;
                    select.value = "";
                }
                if (selectedGummies[tray].length >= limit) {
                    select.disabled = true;
                }
            }

            Array.from(select.options).forEach(option => {
                option.disabled = selectedGummies[tray].includes(option.value) && option.value !== "";
            });
        }

        function removeGummy(tray, gummy) {
            selectedGummies[tray] = selectedGummies[tray].filter(g => g !== gummy);
            document.getElementById(`${tray}Selected`).innerHTML = selectedGummies[tray]
                .map(g => `<p>${g} <button onclick="removeGummy('${tray}', '${g}')">Eliminar</button></p>`).join('');
            document.getElementById(`${tray}Gummies`).disabled = false;
            document.getElementById(`${tray}Gummies`).value = "";
            Array.from(document.getElementById(`${tray}Gummies`).options).forEach(option => {
                option.disabled = selectedGummies[tray].includes(option.value) && option.value !== "";
            });
        }

        function updateAppleExtra(tray) {
            const select = document.getElementById(`${tray}Apple`);
            if (select) appleExtras[tray] = select.value;
            document.getElementById(`${tray}AppleInfo`).innerHTML = appleExtras[tray] === 'Sí' ? '<p>Manzana con chamoy añadida (+$15)</p>' : '';
        }

        function addToOrder(name, basePrice, variety) {
            const tray = name.toLowerCase().replace(/ /g, '').replace(/deluxe/g, 'deluxe');
            let price = parseFloat(basePrice);
            let quantities = selectedGummies[tray.replace(/[A-Za-z]*$/, '')]; // Usa el array de gomitas

            if (quantities.length === 0) {
                alert("Por favor, selecciona al menos un tipo de gomita.");
                return;
            }

            // Ajustar precio si incluye manzana (excepto Charola Deluxe que ya la incluye)
            if (tray.replace(/[A-Za-z]*$/, '') !== 'deluxe' && appleExtras[tray.replace(/[A-Za-z]*$/, '')] === 'Sí') {
                price += 15;
            }

            const order = {
                name: name,
                price: price,
                variety: variety,
                category: 'charola',
                quantities: quantities,
                hasApple: (tray.replace(/[A-Za-z]*$/, '') !== 'deluxe' && appleExtras[tray.replace(/[A-Za-z]*$/, '')] === 'Sí') || (tray.replace(/[A-Za-z]*$/, '') === 'deluxe')
            };

            orders.push(order);
            localStorage.setItem('orders', JSON.stringify(orders));
            console.log("Pedido guardado:", order);
            setTimeout(() => {
                window.location.href = 'pedidos.html';
            }, 300);
        }
    </script>
</body>
</html>